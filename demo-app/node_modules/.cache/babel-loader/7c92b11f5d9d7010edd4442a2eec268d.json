{"remainingRequest":"/Volumes/Voorhoede/www/deltares/delta-vue-components/demo-app/node_modules/babel-loader/lib/index.js!/Volumes/Voorhoede/www/deltares/delta-vue-components/demo-app/node_modules/eslint-loader/index.js??ref--13-0!/Volumes/Voorhoede/www/deltares/delta-vue-components/component-library/src/components/LayerListControls/reorder-layers-array.js","dependencies":[{"path":"/Volumes/Voorhoede/www/deltares/delta-vue-components/component-library/src/components/LayerListControls/reorder-layers-array.js","mtime":1604566267000},{"path":"/Volumes/Voorhoede/www/deltares/delta-vue-components/demo-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Voorhoede/www/deltares/delta-vue-components/demo-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Voorhoede/www/deltares/delta-vue-components/demo-app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgX3RvQXJyYXkgZnJvbSAiL1ZvbHVtZXMvVm9vcmhvZWRlL3d3dy9kZWx0YXJlcy9kZWx0YS12dWUtY29tcG9uZW50cy9kZW1vLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9BcnJheSI7CmltcG9ydCBtb3ZlSW5BcnJheSBmcm9tICIuLi8uLi91dGlscy9tb3ZlLWluLWFycmF5IjsKCmZ1bmN0aW9uIHdhbGtHcm91cChwYXJlbnRJZHMsIG9sZEluZGV4LCBuZXdJbmRleCkgewogIC8qKiBAcGFyYW0ge0xheWVyR3JvdXB9IGdyb3VwICovCiAgZnVuY3Rpb24gZXhlY3V0ZShncm91cCkgewogICAgdmFyIGdyb3VwSWQgPSBncm91cC5pZDsKCiAgICB2YXIgX3BhcmVudElkcyA9IF90b0FycmF5KHBhcmVudElkcyksCiAgICAgICAgcGFyZW50SWQgPSBfcGFyZW50SWRzWzBdLAogICAgICAgIHJlc3QgPSBfcGFyZW50SWRzLnNsaWNlKDEpOyAvLyBNeSBpZCBpcyBhdCB0aGUgcm9vdCBvZiB0aGUgbGlzdC4gSSBhbSBhIChncmFuZCkgcGFyZW50CgoKICAgIGlmIChncm91cElkID09PSBwYXJlbnRJZCkgewogICAgICAvLyBJJ20gdGhlIGxhc3QgaWQgb2YgdGhlIFBhcmVudCBJZHMsIE15IGNoaWxkcmVuIG5lZWQgdG8gYmUgcmVvcmRlcmQKICAgICAgaWYgKHJlc3QubGVuZ3RoID09PSAwKSB7CiAgICAgICAgZ3JvdXAuY2hpbGRyZW4gPSBtb3ZlSW5BcnJheShncm91cC5jaGlsZHJlbiwgb2xkSW5kZXgsIG5ld0luZGV4KTsgLy8gSSdtIG5vdCB0aGUgbGFzdCBpZCBvZiB0aGUgUGFyZW50IElkcywgYSBncmFuZGtpZCBvZiBtZSBuZWVkcyB0byBiZSAKICAgICAgICAvLyByZW9yZGVyZC4gCiAgICAgIH0gZWxzZSB7CiAgICAgICAgZ3JvdXAuY2hpbGRyZW4gPSBncm91cC5jaGlsZHJlbi5tYXAod2Fsa0dyb3VwKHJlc3QsIG9sZEluZGV4LCBuZXdJbmRleCkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGdyb3VwOwogIH0KCiAgcmV0dXJuIGV4ZWN1dGU7Cn0KLyoqCiAqIFJlb3JkZXJzIGFuIGl0ZW0gaW4gdGhlIGxheWVycyBhcnJheS4KICogQHBhcmFtIHtMYXllckdyb3VwW119IHNvdXJjZQogKiBAcGFyYW0ge051bWJlcn0gb2xkSW5kZXgKICogQHBhcmFtIHtOdW1iZXJ9IG5ld0luZGV4CiAqIEBwYXJhbSB7U3RyaW5nW119IHBhcmVudElkcwogKi8KCgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZW9yZGVyTGF5ZXJBcnJheShzb3VyY2UsIHBhcmVudElkcywgb2xkSW5kZXgsIG5ld0luZGV4KSB7CiAgLy8gV2UgY2xvbmUgdGhlIHNvdXJjZSBzbyB3ZSBjYW4gbXV0YXRlIHRoZSBjbG9uZSBpbiBwbGFjZQogIHZhciBfc291cmNlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2UpKTsgLy8gVGhlIHJvb3QgbGlzdCBpcyBiZWluZyByZW9yZGVyZAoKCiAgaWYgKHBhcmVudElkcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBtb3ZlSW5BcnJheShfc291cmNlLCBvbGRJbmRleCwgbmV3SW5kZXgpOwogIH0gLy8gQSBuZXN0ZWQgbGlzdCBpcyBiZWluZyByZW9yZGVyZAoKCiAgcmV0dXJuIF9zb3VyY2UubWFwKHdhbGtHcm91cChwYXJlbnRJZHMsIG9sZEluZGV4LCBuZXdJbmRleCkpOwp9"},{"version":3,"sources":["/Volumes/Voorhoede/www/deltares/delta-vue-components/component-library/src/components/LayerListControls/reorder-layers-array.js"],"names":["moveInArray","walkGroup","parentIds","oldIndex","newIndex","execute","group","groupId","id","parentId","rest","length","children","map","reorderLayerArray","source","_source","JSON","parse","stringify"],"mappings":";;;AAAA,OAAOA,WAAP,MAAwB,2BAAxB;;AAEA,SAASC,SAAT,CAAmBC,SAAnB,EAA8BC,QAA9B,EAAwCC,QAAxC,EAAkD;AAEhD;AACA,WAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,QAAMC,OAAO,GAAGD,KAAK,CAACE,EAAtB;;AADsB,8BAEQN,SAFR;AAAA,QAEdO,QAFc;AAAA,QAEDC,IAFC,wBAItB;;;AACA,QAAIH,OAAO,KAAKE,QAAhB,EAA0B;AAExB;AACA,UAAIC,IAAI,CAACC,MAAL,KAAgB,CAApB,EAAuB;AACrBL,QAAAA,KAAK,CAACM,QAAN,GAAiBZ,WAAW,CAACM,KAAK,CAACM,QAAP,EAAiBT,QAAjB,EAA2BC,QAA3B,CAA5B,CADqB,CAGvB;AACA;AACC,OALD,MAKO;AACLE,QAAAA,KAAK,CAACM,QAAN,GAAiBN,KAAK,CAACM,QAAN,CAAeC,GAAf,CAAmBZ,SAAS,CAACS,IAAD,EAAOP,QAAP,EAAiBC,QAAjB,CAA5B,CAAjB;AACD;AACF;;AAED,WAAOE,KAAP;AACD;;AAED,SAAOD,OAAP;AACD;AAED;;;;;;;;;AAOA,eAAe,SAASS,iBAAT,CAA2BC,MAA3B,EAAmCb,SAAnC,EAA8CC,QAA9C,EAAwDC,QAAxD,EAAkE;AAC/E;AACA,MAAMY,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeJ,MAAf,CAAX,CAAhB,CAF+E,CAI/E;;;AACA,MAAIb,SAAS,CAACS,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAOX,WAAW,CAACgB,OAAD,EAAUb,QAAV,EAAoBC,QAApB,CAAlB;AACD,GAP8E,CAS/E;;;AACA,SAAOY,OAAO,CAACH,GAAR,CAAYZ,SAAS,CAACC,SAAD,EAAYC,QAAZ,EAAsBC,QAAtB,CAArB,CAAP;AACD","sourcesContent":["import moveInArray from \"../../utils/move-in-array\";\n\nfunction walkGroup(parentIds, oldIndex, newIndex) {\n\n  /** @param {LayerGroup} group */\n  function execute(group) {\n    const groupId = group.id\n    const [ parentId, ...rest ] = parentIds\n\n    // My id is at the root of the list. I am a (grand) parent\n    if (groupId === parentId) {\n\n      // I'm the last id of the Parent Ids, My children need to be reorderd\n      if (rest.length === 0) {\n        group.children = moveInArray(group.children, oldIndex, newIndex)\n\n      // I'm not the last id of the Parent Ids, a grandkid of me needs to be \n      // reorderd. \n      } else {\n        group.children = group.children.map(walkGroup(rest, oldIndex, newIndex))\n      }\n    }\n    \n    return group\n  }\n\n  return execute\n}\n\n/**\n * Reorders an item in the layers array.\n * @param {LayerGroup[]} source\n * @param {Number} oldIndex\n * @param {Number} newIndex\n * @param {String[]} parentIds\n */\nexport default function reorderLayerArray(source, parentIds, oldIndex, newIndex) {\n  // We clone the source so we can mutate the clone in place\n  const _source = JSON.parse(JSON.stringify(source))\n\n  // The root list is being reorderd\n  if (parentIds.length === 0) {\n    return moveInArray(_source, oldIndex, newIndex)\n  }\n\n  // A nested list is being reorderd\n  return _source.map(walkGroup(parentIds, oldIndex, newIndex))\n}"]}]}